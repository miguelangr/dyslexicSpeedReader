#!/bin/bash

# Configurar variables del proxy
PROXY_HOST="proxy.corporativo.com"
PROXY_PORT="8080"

# Cargar Shellnium (asegúrate de tenerlo instalado)
source /ruta/a/shellnium.sh

# Iniciar el navegador con proxy
selenium::start chrome --proxy-server="http://$PROXY_HOST:$PROXY_PORT"

# Navegar a la URL
selenium::navigate "https://db-author-prd.adobecqms.net/sites.html/content"

# Esperar a que se cargue la página (ajusta según sea necesario)
sleep 5

# Extraer las cookies
cookies=$(selenium::execute "return document.cookie;")

# Guardar las cookies en un archivo
echo "$cookies" > aem_cookies.txt

# Cerrar el navegador
selenium::quit

echo "Cookies guardadas correctamente en 'aem_cookies.txt'"
